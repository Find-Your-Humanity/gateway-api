# 설정 가이드

REAL 캡차의 기본 설정과 고급 옵션을 구성하는 방법을 알아보세요.

## 기본 설정

### API 키 설정
1. **대시보드 접속**: REAL 대시보드에 로그인
2. **API 키 생성**: 새로운 API 키와 Secret 키 발급
3. **도메인 등록**: 사용할 도메인을 허용 목록에 추가
4. **키 복사**: 발급받은 키를 안전한 곳에 보관

### 기본 위젯 설정
```javascript
REAL.init({
  siteKey: 'YOUR_API_KEY_HERE',
  container: '#captcha-container',
  theme: 'light',        // light, dark
  size: 'normal',        // compact, normal, large
  language: 'ko'         // ko, en, ja, zh
});
```

## 고급 설정

### 테마 커스터마이징
```css
/* 커스텀 테마 CSS */
.real-captcha-widget {
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.real-captcha-button {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 4px;
  cursor: pointer;
}
```

### 콜백 함수 설정
```javascript
REAL.init({
  siteKey: 'YOUR_API_KEY_HERE',
  container: '#captcha-container',
  
  // 성공 시 콜백
  callback: function(token) {
    console.log('캡차 성공:', token);
    // 폼 제출 또는 토큰 처리
  },
  
  // 만료 시 콜백
  'expired-callback': function() {
    console.log('토큰 만료');
    // 위젯 재설정 또는 사용자 안내
  },
  
  // 에러 시 콜백
  'error-callback': function(error) {
    console.error('캡차 오류:', error);
    // 에러 처리 및 사용자 안내
  }
});
```

## 환경별 설정

### 개발 환경
```javascript
// 개발용 설정
const config = {
  siteKey: process.env.REAL_DEV_API_KEY,
  container: '#dev-captcha',
  theme: 'light',
  size: 'compact',
  language: 'ko'
};

// 로컬 개발 시 도메인 설정
// http://localhost:3000
// http://127.0.0.1:3000
```

### 프로덕션 환경
```javascript
// 프로덕션용 설정
const config = {
  siteKey: process.env.REAL_PROD_API_KEY,
  container: '#prod-captcha',
  theme: 'auto',        // 자동 테마 감지
  size: 'normal',
  language: 'auto'      // 자동 언어 감지
};

// HTTPS 필수
// 도메인 제한 설정
// API 키 보안 강화
```

## 보안 설정

### 도메인 제한
- **개발 도메인**: localhost, 개발 서버 IP
- **프로덕션 도메인**: 실제 서비스 도메인
- **서브도메인**: *.yourdomain.com 형식 지원
- **IP 제한**: 특정 IP 주소에서만 사용 가능

### API 키 보안
```bash
# 환경 변수 설정
export REAL_API_KEY="rc_live_your_api_key_here"
export REAL_SECRET_KEY="rc_sk_your_secret_key_here"

# .env 파일 사용
REAL_API_KEY=rc_live_your_api_key_here
REAL_SECRET_KEY=rc_sk_your_secret_key_here
```

## 성능 최적화

### 로딩 최적화
```html
<!-- 지연 로딩 -->
<script>
  window.addEventListener('load', function() {
    // 페이지 로드 완료 후 캡차 초기화
    loadCaptcha();
  });
</script>

<!-- 조건부 로딩 -->
<script>
  if (document.forms.length > 0) {
    // 폼이 있을 때만 캡차 로드
    loadCaptcha();
  }
</script>
```

### 캐싱 설정
```javascript
// 브라우저 캐싱 활용
const captchaConfig = {
  siteKey: 'YOUR_API_KEY_HERE',
  container: '#captcha-container',
  cache: true,           // 캐싱 활성화
  cacheTimeout: 300000   // 5분 캐시
};
```

## 접근성 설정

### 스크린 리더 지원
```javascript
REAL.init({
  siteKey: 'YOUR_API_KEY_HERE',
  container: '#captcha-container',
  
  // 접근성 옵션
  'aria-label': '보안 확인을 위한 캡차',
  'aria-describedby': 'captcha-description',
  'tabindex': 0
});

// 설명 텍스트 추가
document.getElementById('captcha-description').textContent = 
  '자동화된 봇을 방지하기 위한 보안 확인입니다.';
```

### 키보드 네비게이션
```javascript
// 키보드 이벤트 처리
document.addEventListener('keydown', function(e) {
  if (e.key === 'Tab' && e.target.id === 'captcha-container') {
    // Tab 키로 캡차에 포커스 시
    e.preventDefault();
    // 캡차 활성화
  }
});
```

## 모니터링 및 로깅

### 성능 모니터링
```javascript
// 로딩 시간 측정
const startTime = performance.now();

REAL.init({
  siteKey: 'YOUR_API_KEY_HERE',
  container: '#captcha-container',
  callback: function(token) {
    const loadTime = performance.now() - startTime;
    console.log(`캡차 로딩 시간: ${loadTime}ms`);
    
    // 분석 서비스에 전송
    analytics.track('captcha_loaded', { loadTime });
  }
});
```

### 에러 로깅
```javascript
// 에러 추적
window.addEventListener('error', function(e) {
  if (e.message.includes('REAL')) {
    // REAL 관련 에러 로깅
    console.error('REAL 캡차 에러:', e);
    
    // 에러 보고 서비스에 전송
    errorReporting.captureException(e);
  }
});
```

## 문제 해결

### 일반적인 문제들

1. **위젯이 표시되지 않음**
   - API 키 확인
   - 도메인 등록 확인
   - 컨테이너 요소 존재 확인

2. **토큰 검증 실패**
   - Secret 키 확인
   - 서버 시간 동기화
   - 토큰 만료 시간 확인

3. **성능 문제**
   - 스크립트 로딩 최적화
   - 캐싱 설정 확인
   - CDN 사용 여부 확인

### 디버깅 도구

```javascript
// 디버그 모드 활성화
REAL.init({
  siteKey: 'YOUR_API_KEY_HERE',
  container: '#captcha-container',
  debug: true  // 디버그 정보 출력
});

// 상태 확인
console.log('REAL 객체:', window.REAL);
console.log('위젯 상태:', window.REAL.getStatus());
```

## 설정 모범 사례

1. **보안 우선**: API 키를 코드에 하드코딩하지 마세요
2. **사용자 경험**: 적절한 크기와 테마를 선택하세요
3. **성능 고려**: 필요할 때만 캡차를 로드하세요
4. **접근성**: 모든 사용자가 사용할 수 있도록 설정하세요
5. **모니터링**: 성능과 에러를 지속적으로 모니터링하세요

올바른 설정으로 REAL 캡차의 모든 기능을 활용하고 최적의 사용자 경험을 제공할 수 있습니다. 